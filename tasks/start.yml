---
- name: influxdb | restart | restart influxdb service
  service: name=influxdb state=restarted enabled=yes
  when: monasca_influxdb_restart_required

- name: influxdb | start | start influxdb service
  service: name=influxdb state=started enabled=yes

- name: wait for influxdb port
  wait_for: port={{influxdb_client_port}} host={{influxdb_bind_address | default('127.0.0.1') }} state=started timeout=30
  register: first_wait
